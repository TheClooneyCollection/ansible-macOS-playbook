---
- hosts: all

  vars:
    # For all homebrew related tasks,
    # remember to add the `become` and `become_user` properties.
    # So that this playbook can be used on a multiple users system.

    homebrew_user: "{{ ansible_user_id }}"
    homebrew_group: admin

    ssh_type: ed25519
    ssh_rounds: 256
    ssh_private_key_path: "~/.ssh/id_{{ ssh_type }}"
    ssh_keygen_command: "ssh-keygen -o -t {{ ssh_type }} -a {{ ssh_rounds }} -N '{{ passphrase.user_input }}' -f {{ ssh_private_key_path }}"

    install_gaming_casks: true
    install_streaming_casks: true

  roles:
    - role: preflight

    - role: sudo_by_touchid
      tags: [touchid]

    - role: dotfiles
      tags: [dotfiles]

    - role: folders
      tags: [folder-structure]

    - role: macos_finder
      tags: [finder]

    - role: macos_stage_manager
      tags: [stage-manager]

    - role: macos_dock
      tags: [dock]

    - role: homebrew_base
      tags: [homebrew, homebrew-setup]

    - role: dev_tools
      tags: [homebrew]

    - role: rust
      tags: [rust]

    - role: docker
      tags: [homebrew, docker]

    - role: ai-assitance
      tags: [homebrew, ai-assistance]

    - role: quest
      tags: [quest]

    - role: shell_fish
      tags: [fishshell]

    - role: fzf
      tags: [fzf]

    - role: python_env
      tags: [python]

    - role: casks
      tags: [homebrew]

    - role: gaming
      tags: [homebrew, gaming]

    - role: streaming
      tags: [homebrew, streaming]

    - role: ssh
      tags: [ssh]

    - role: shared_fonts
      vars:
        fonts:
          - font-inconsolata-g-for-powerline
          - font-source-code-pro
          - font-source-code-pro-for-powerline

    - role: emacs
      tags: [spacemacs]

    - role: vim
      tags: [vim]
